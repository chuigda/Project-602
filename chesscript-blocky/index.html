<!doctype html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>Chesscript-Blocky Editor</title>

      <script type="text/javascript">
         const ajax = {
           get: async (url, headers, responder) => {
             responder = responder || (x => x.text())
             const resp = await fetch(url, {headers})
             return await responder(resp)
           },
           getWithProgressReport(url, headers, onProgress) {
             return new Promise((resolve, reject) => {
               const xhr = new XMLHttpRequest()
               xhr.open("GET", url, true)
               xhr.responseType = "blob"
               xhr.onprogress = onProgress
               xhr.onload = () => {
                 const response = xhr.responseType === "blob" ? xhr.response : xhr.responseText
                 resolve(response)
               }
               xhr.send()
             })
           }
         }

         self.$ = s => s ? document.getElementById(s) : ajax
      </script>
   </head>

   <body>
      <script type="module" src="/src/index.js">
      </script>

      <div id="pageContainer">
         <div id="blocklyDiv"></div>
         <textarea id="generatedCode" readonly></textarea>
      </div>
   </body>
</html>
